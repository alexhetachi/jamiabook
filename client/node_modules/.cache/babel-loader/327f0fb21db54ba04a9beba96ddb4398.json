{"ast":null,"code":"var _jsxFileName = \"E:\\\\jamia-book\\\\client\\\\src\\\\components\\\\dashboard\\\\post\\\\Posts.js\";\nimport React, { Component } from 'react';\nimport AddPost from './AddPost';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { connect } from 'react-redux';\nimport { fetchPosts } from '../../../actions/postActions';\nimport { addComment } from '../../../actions/postActions';\nimport { addLike } from '../../../actions/postActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: []\n    };\n\n    this.fetchStatePosts = () => {\n      this.props.fetchPosts();\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.onKeyPress = e => {\n      //it triggers by pressing the enter key\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        const post_id = e.target.id;\n        const user_id = this.props.user._id;\n        const comment = e.target.value;\n        console.log(comment);\n\n        if (comment.length > 0 && comment.trim() !== '') {\n          const newComment = {\n            post_id,\n            user_id,\n            fname: this.props.user.fname,\n            lname: this.props.user.lname,\n            user_img: this.props.user.profile_imgsrc,\n            comment\n          };\n          this.props.addComment(newComment);\n          this.setState({\n            [e.target.id]: ''\n          });\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    // this.setState({posts:this.props.posts})\n    this.props.fetchPosts();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.posts !== this.props.posts) {\n      console.log('vro');\n      this.setState({\n        posts: this.props.posts\n      });\n    } else if (prevProps.post != this.props.post) {\n      if (this.props.post) {\n        let newposts = [...this.state.posts];\n        newposts.unshift(this.props.post);\n        console.log('vro add post:' + this.props.post.fname);\n        this.setState({\n          posts: newposts\n        });\n      }\n    } else if (prevProps.comment != this.props.comment) {\n      if (this.props.comment) {\n        let newComments = [...this.state.posts];\n\n        for (var i in newComments) {\n          if (newComments[i]._id === this.props.comment.post_id) {\n            newComments.comments.unshift(this.props.comment);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newComments\n        });\n      }\n    } else if (prevProps.like != this.props.like) {\n      if (this.props.like) {\n        let newLikes = [...this.state.posts];\n        newOneLike = {\n          user_id: this.props.like.user_id\n        };\n\n        for (var i in newLikes) {\n          if (newLikes[i]._id === this.props.comment.post_id) {\n            newLikes.likes.unshift(this.props.newOneLike);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newLikes\n        });\n      }\n    }\n  }\n\n  render() {\n    const postItems = this.state.posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: post.user_img,\n              class: \"logo-img\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [post.fname, \" \", post.lname, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 59\n              }, this), \"(\", this.props.user ? this.props.user.branch : '', \", \", this.props.user ? this.props.user.semester : '', \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"report\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"100%\",\n              height: \"100%\",\n              fill: \"currentColor\",\n              class: \"bi bi-backspace\",\n              viewBox: \"0 0 16 16\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          margin: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"post-text\",\n        children: post.discp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `./uploads/${post.post_img}`,\n        class: \"post-img\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          marginTop: '0',\n          backgroundColor: 'black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"like\",\n        children: \"\\u2764\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-likes\",\n        children: post.likes.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        class: \"comment\",\n        placeholder: \"Comment\",\n        id: post._id,\n        onChange: this.onChange,\n        value: this.state.post._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-comments\",\n        children: post.comments.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), post.comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: comment.user_img,\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: this.props.user ? this.props.user._id === comment.user_id ? 'You' : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [comment.fname, \" \", comment.lname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 110\n          }, this) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 165\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: comment.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this));\n    return (\n      /*#__PURE__*/\n      // <div>\n      _jsxDEV(\"div\", {\n        class: \"col-md-6\",\n        style: {\n          padding: '10px 30px 10px 30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AddPost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          dataLength: this.props.posts.length,\n          next: this.fetchStatePosts,\n          hasMore: true,\n          loader: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: 'white'\n              },\n              children: \"Loading/End of posts...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 33\n          }, this),\n          children: postItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this) // </div>\n\n    );\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  posts: state.post.items,\n  post: state.post.item,\n  comment: state.post.cmtitem,\n  postLoading: state.post.postLoading,\n  auth: state.auth,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  fetchPosts,\n  addComment,\n  addLike\n})(Posts); // export default Posts;","map":{"version":3,"sources":["E:/jamia-book/client/src/components/dashboard/post/Posts.js"],"names":["React","Component","AddPost","InfiniteScroll","connect","fetchPosts","addComment","addLike","Posts","state","posts","fetchStatePosts","props","onChange","e","setState","target","id","value","onKeyPress","key","preventDefault","post_id","user_id","user","_id","comment","console","log","length","trim","newComment","fname","lname","user_img","profile_imgsrc","componentDidMount","componentDidUpdate","prevProps","post","newposts","unshift","newComments","i","comments","like","newLikes","newOneLike","likes","render","postItems","map","branch","semester","margin","discp","post_img","marginTop","backgroundColor","padding","color","mapStateToProps","items","item","cmtitem","postLoading","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AddPost from './AddPost';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { connect } from 'react-redux';\r\nimport { fetchPosts } from '../../../actions/postActions';\r\nimport { addComment } from '../../../actions/postActions';\r\nimport { addLike } from '../../../actions/postActions';\r\n\r\n\r\nclass Posts extends Component {\r\n\r\n    state = {\r\n        posts:[],\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.setState({posts:this.props.posts})\r\n        this.props.fetchPosts()\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.posts !== this.props.posts){\r\n            console.log('vro')\r\n            this.setState({posts:this.props.posts})\r\n        }else if(prevProps.post != this.props.post){\r\n            if(this.props.post){\r\n                let newposts = [...this.state.posts];\r\n                newposts.unshift(this.props.post)\r\n                console.log('vro add post:'+this.props.post.fname)\r\n                this.setState({posts:newposts})\r\n            }\r\n        }else if(prevProps.comment != this.props.comment){\r\n            if(this.props.comment){\r\n                let newComments = [...this.state.posts];\r\n                for(var i in newComments){\r\n                    if(newComments[i]._id === this.props.comment.post_id){\r\n                        newComments.comments.unshift(this.props.comment)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newComments})\r\n            }\r\n        }else if(prevProps.like != this.props.like){\r\n            if(this.props.like){\r\n                let newLikes = [...this.state.posts];\r\n                newOneLike = {\r\n                    user_id: this.props.like.user_id\r\n                }\r\n                for(var i in newLikes){\r\n                    if(newLikes[i]._id === this.props.comment.post_id){\r\n                        newLikes.likes.unshift(this.props.newOneLike)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newLikes})\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchStatePosts = () => {\r\n        this.props.fetchPosts()\r\n    };\r\n\r\n\r\n    onChange = (e) => {\r\n        this.setState({[e.target.id]:e.target.value})\r\n    }\r\n    \r\n    onKeyPress = (e) => {\r\n        //it triggers by pressing the enter key\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault()\r\n            const post_id = e.target.id\r\n            const user_id = this.props.user._id\r\n            const comment = e.target.value\r\n            console.log(comment)\r\n            if(comment.length>0 && comment.trim() !== ''){\r\n                const newComment = {\r\n                    post_id,\r\n                    user_id,\r\n                    fname:this.props.user.fname,\r\n                    lname:this.props.user.lname,\r\n                    user_img:this.props.user.profile_imgsrc,\r\n                    comment,\r\n                }\r\n                this.props.addComment(newComment)\r\n                this.setState({[e.target.id]:''})\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const postItems = this.state.posts.map((post) => (\r\n\r\n            <div class=\"post\">\r\n                <table>\r\n                <tr>\r\n                    <td><img src={post.user_img} class=\"logo-img\" alt=\"\"/></td>\r\n                    <td><strong>{post.fname} {post.lname} <br/>({this.props.user?this.props.user.branch:''}, {this.props.user?this.props.user.semester:''})</strong></td>\r\n\r\n                    <button class=\"report\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                            <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                        </svg>\r\n                    </button>\r\n                </tr>\r\n                </table>\r\n                <hr style={{margin: '5px'}}/>\r\n                <p class=\"post-text\">\r\n                    {post.discp}\r\n                </p>\r\n                <img src={`./uploads/${post.post_img}`} class=\"post-img\" alt=\"\"/>\r\n                <hr style={{marginTop:'0', backgroundColor:'black'}}/>\r\n                <button class=\"like\">❤</button>\r\n                <span class=\"no-of-likes\">{post.likes.length}</span>\r\n\r\n                <input \r\n                    type=\"text\" \r\n                    class=\"comment\" \r\n                    placeholder=\"Comment\"\r\n                    id={post._id}\r\n                    onChange={this.onChange}\r\n                    value={this.state.post._id}\r\n                />\r\n                <span class=\"no-of-comments\">{post.comments.length}</span>\r\n                <hr/>\r\n\r\n                {post.comments.map(comment => (\r\n                    <div class=\"comment-by-others\">\r\n                    <img src={comment.user_img} class=\"comment-img\" alt=\"\"/>\r\n                    <span class=\"commentor\">{this.props.user?(this.props.user._id === comment.user_id?'You':(<div>{comment.fname} {comment.lname}</div>)):''}</span><br/>\r\n                    <span class=\"actual-comment\">   \r\n                    {comment.comment}\r\n                    </span>\r\n                    </div>\r\n                ))}\r\n                {/* <div class=\"comment-by-others\">\r\n                <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n                <span class=\"commentor\">Another User</span><br/>\r\n                <span class=\"actual-comment\">   \r\n                This is a comment\r\n                </span>\r\n                </div> */}\r\n            </div>\r\n\r\n        ));\r\n\r\n\r\n        return (\r\n            // <div>\r\n                <div class=\"col-md-6\" style={{padding: '10px 30px 10px 30px'}}>\r\n                    {/* <!-- posts go here --> */}\r\n\r\n                    <AddPost/>\r\n\r\n                    <InfiniteScroll\r\n                        dataLength={this.props.posts.length}\r\n                        next={this.fetchStatePosts}\r\n                        hasMore={true}\r\n                        loader={<center><h4 style={{color:'white'}}>Loading/End of posts...</h4></center>}\r\n                    >\r\n                        {postItems}\r\n                    </InfiniteScroll>                 \r\n\r\n\r\n\r\n\r\n\r\n        {/* <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div>\r\n\r\n\r\n         <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div> */}\r\n\r\n\r\n                </div>\r\n            // </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=state=>({\r\n    posts:state.post.items,\r\n    post:state.post.item,\r\n    comment:state.post.cmtitem,\r\n    postLoading:state.post.postLoading,\r\n    auth:state.auth,\r\n    user:state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, { fetchPosts, addComment, addLike })(Posts);\r\n// export default Posts;"]},"metadata":{},"sourceType":"module"}