{"ast":null,"code":"import { ADD_POST, FETCH_POSTS, ADD_COMMENT, ADD_LIKE } from './types';\nimport axios from 'axios';\nlet x = 0,\n    newData = [];\nlet limit = 10,\n    page = 0;\nexport const fetchPosts = () => dispatch => {\n  if (x === 0) {\n    axios.post('/api/fetchPosts', {\n      page,\n      limit\n    }).then(posts => {\n      newData = posts.data;\n      console.log('First x=0:' + newData);\n      dispatch({\n        type: FETCH_POSTS,\n        payload: posts.data\n      });\n      page = page + 1;\n      x = 1;\n    });\n  } else {\n    axios.post('/api/fetchPosts', {\n      page,\n      limit\n    }).then(posts => {\n      //   console.log('Old:'+ newData.length)\n      newData = [...newData, ...posts.data]; //   console.log('New:'+ newData.length)\n\n      dispatch({\n        type: FETCH_POSTS,\n        payload: newData\n      });\n      page = page + 1;\n    });\n  }\n}; // export const addPost = ( post ) => dispatch => {\n//   if(post.get('myImage') === '') console.log('no image in front');\n//   else {\n//       axios({\n//           method: 'post',\n//           url: '/api/addPost',\n//           data: post,\n//           headers: {\n//           'Content-Type': 'multipart/form-data'\n//       }\n//       }).then(item =>\n//           dispatch({\n//           type: ADD_POST,\n//           payload: item.data\n//           })\n//       ).catch(err => {\n//           console.log(err)\n//       })\n//   }\n// }\n\nexport const addFPost = post => dispatch => {\n  axios({\n    method: 'post',\n    url: '/api/addFPost',\n    data: post\n  }).then(item => {\n    dispatch({\n      type: ADD_POST,\n      payload: item.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const addComment = comment => dispatch => {\n  axios({\n    method: 'post',\n    url: '/api/addComment',\n    data: comment\n  }).then(item => dispatch({\n    type: ADD_COMMENT,\n    payload: item.data\n  })).catch(err => {\n    console.log(err);\n  });\n};\nexport const addLike = like => dispatch => {\n  axios({\n    method: 'post',\n    url: '/api/addLike',\n    data: like\n  }).then(item => dispatch({\n    type: ADD_LIKE,\n    payload: item.data\n  })).catch(err => {\n    console.log(err);\n  });\n};","map":{"version":3,"sources":["C:/Users/Syed Mohdin/Desktop/jmibook/client/src/actions/postActions.js"],"names":["ADD_POST","FETCH_POSTS","ADD_COMMENT","ADD_LIKE","axios","x","newData","limit","page","fetchPosts","dispatch","post","then","posts","data","console","log","type","payload","addFPost","method","url","item","catch","err","addComment","comment","addLike","like"],"mappings":"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","sourcesContent":["import { ADD_POST, FETCH_POSTS, ADD_COMMENT, ADD_LIKE } from './types';\r\nimport axios from 'axios';\r\nlet x = 0, newData = [];\r\nlet limit = 10, page = 0;\r\n\r\nexport const fetchPosts = () => dispatch => {\r\n\r\n    if(x === 0){\r\n        axios.post('/api/fetchPosts',{ page, limit })\r\n        .then(posts => {\r\n          newData = posts.data\r\n          console.log('First x=0:'+ newData)\r\n          dispatch({\r\n              type: FETCH_POSTS,\r\n              payload: posts.data\r\n          })\r\n          page = page + 1\r\n          x=1\r\n      })\r\n    }else{\r\n      axios.post('/api/fetchPosts',{ page, limit })\r\n        .then(posts =>{\r\n        //   console.log('Old:'+ newData.length)\r\n          newData = [...newData,...posts.data]\r\n        //   console.log('New:'+ newData.length)\r\n          dispatch({\r\n              type: FETCH_POSTS,\r\n              payload: newData\r\n          }) \r\n        page = page + 1\r\n      })\r\n    }\r\n      \r\n      \r\n};\r\n\r\n\r\n// export const addPost = ( post ) => dispatch => {\r\n//   if(post.get('myImage') === '') console.log('no image in front');\r\n//   else {\r\n//       axios({\r\n//           method: 'post',\r\n//           url: '/api/addPost',\r\n//           data: post,\r\n//           headers: {\r\n//           'Content-Type': 'multipart/form-data'\r\n//       }\r\n//       }).then(item =>\r\n//           dispatch({\r\n//           type: ADD_POST,\r\n//           payload: item.data\r\n//           })\r\n//       ).catch(err => {\r\n//           console.log(err)\r\n//       })\r\n//   }\r\n// }\r\n\r\n\r\n\r\nexport const addFPost = ( post ) => dispatch => {\r\n      axios({\r\n          method: 'post',\r\n          url: '/api/addFPost',\r\n          data: post,\r\n      }).then(item => {\r\n        dispatch({\r\n          type: ADD_POST,\r\n          payload: item.data\r\n          })\r\n      }\r\n      ).catch(err => {\r\n          console.log(err)\r\n      })\r\n}\r\n\r\nexport const addComment = ( comment ) => dispatch => {\r\n      axios({\r\n          method: 'post',\r\n          url: '/api/addComment',\r\n          data: comment,\r\n      }).then(item =>\r\n          dispatch({\r\n          type: ADD_COMMENT,\r\n          payload: item.data\r\n          })\r\n      ).catch(err => {\r\n          console.log(err)\r\n      })\r\n}\r\n\r\nexport const addLike = ( like ) => dispatch => {\r\n  axios({\r\n      method: 'post',\r\n      url: '/api/addLike',\r\n      data: like,\r\n  }).then(item =>\r\n      dispatch({\r\n      type: ADD_LIKE,\r\n      payload: item.data\r\n      })\r\n  ).catch(err => {\r\n      console.log(err)\r\n  })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}