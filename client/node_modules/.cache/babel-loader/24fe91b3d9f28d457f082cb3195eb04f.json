{"ast":null,"code":"var _jsxFileName = \"E:\\\\jamia-book\\\\client\\\\src\\\\components\\\\dashboard\\\\post\\\\Posts.js\";\nimport React, { Component } from 'react';\nimport AddPost from './AddPost';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { connect } from 'react-redux';\nimport { fetchPosts } from '../../../actions/postActions';\nimport { addComment } from '../../../actions/postActions';\nimport { addLike } from '../../../actions/postActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: []\n    };\n\n    this.fetchStatePosts = () => {\n      this.props.fetchPosts();\n    };\n  }\n\n  componentDidMount() {\n    // this.setState({posts:this.props.posts})\n    this.props.fetchPosts();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.posts !== this.props.posts) {\n      console.log('vro');\n      this.setState({\n        posts: this.props.posts\n      });\n    } else if (prevProps.post != this.props.post) {\n      if (this.props.post) {\n        let newposts = [...this.state.posts];\n        newposts.unshift(this.props.post);\n        console.log('vro add post:' + this.props.post.fname);\n        this.setState({\n          posts: newposts\n        });\n      }\n    } else if (prevProps.comment != this.props.comment) {\n      if (this.props.comment) {\n        let newComments = [...this.state.posts];\n\n        for (var i in newComments) {\n          if (newComments[i]._id === this.props.comment.post_id) {\n            newComments.comments.unshift(this.props.comment);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newComments\n        });\n      }\n    } else if (prevProps.like != this.props.like) {\n      if (this.props.like) {\n        let newLikes = [...this.state.posts];\n        newOneLike = {\n          user_id: this.props.like.user_id\n        };\n\n        for (var i in newLikes) {\n          if (newLikes[i]._id === this.props.comment.post_id) {\n            newLikes.likes.unshift(this.props.newOneLike);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newLikes\n        });\n      }\n    }\n  }\n\n  render() {\n    const postItems = this.state.posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: post.user_img,\n              class: \"logo-img\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [post.fname, \" \", post.lname, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 59\n              }, this), \"(\", this.props.user ? this.props.user.branch : '', \", \", this.props.user ? this.props.user.semester : '', \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"report\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"100%\",\n              height: \"100%\",\n              fill: \"currentColor\",\n              class: \"bi bi-backspace\",\n              viewBox: \"0 0 16 16\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          margin: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"post-text\",\n        children: post.discp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `./uploads/${post.post_img}`,\n        class: \"post-img\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          marginTop: '0',\n          backgroundColor: 'black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"like\",\n        children: \"\\u2764\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-likes\",\n        children: post.likes.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        class: \"comment\",\n        placeholder: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-comments\",\n        children: post.comments.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), post.comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: comment.user_img,\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: [comment.fname, \" \", comment.lname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 83\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: comment.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"Images/user.png\",\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: \"Another User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 60\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: \"This is a comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"Images/user.png\",\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: \"Another User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 60\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: \"This is a comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"Images/user.png\",\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: \"Another User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 60\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: \"This is a comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this));\n    return (\n      /*#__PURE__*/\n      // <div>\n      _jsxDEV(\"div\", {\n        class: \"col-md-6\",\n        style: {\n          padding: '10px 30px 10px 30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AddPost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          dataLength: this.props.posts.length,\n          next: this.fetchStatePosts,\n          hasMore: true,\n          loader: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: 'white'\n              },\n              children: \"Loading/End of posts...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 33\n          }, this),\n          children: postItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this) // </div>\n\n    );\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  posts: state.post.items,\n  post: state.post.item,\n  comment: state.post.cmtitem,\n  postLoading: state.post.postLoading,\n  auth: state.auth,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  fetchPosts,\n  addComment,\n  addLike\n})(Posts); // export default Posts;","map":{"version":3,"sources":["E:/jamia-book/client/src/components/dashboard/post/Posts.js"],"names":["React","Component","AddPost","InfiniteScroll","connect","fetchPosts","addComment","addLike","Posts","state","posts","fetchStatePosts","props","componentDidMount","componentDidUpdate","prevProps","console","log","setState","post","newposts","unshift","fname","comment","newComments","i","_id","post_id","comments","like","newLikes","newOneLike","user_id","likes","render","postItems","map","user_img","lname","user","branch","semester","margin","discp","post_img","marginTop","backgroundColor","length","padding","color","mapStateToProps","items","item","cmtitem","postLoading","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AddPost from './AddPost';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { connect } from 'react-redux';\r\nimport { fetchPosts } from '../../../actions/postActions';\r\nimport { addComment } from '../../../actions/postActions';\r\nimport { addLike } from '../../../actions/postActions';\r\n\r\n\r\nclass Posts extends Component {\r\n\r\n    state = {\r\n        posts:[],\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.setState({posts:this.props.posts})\r\n        this.props.fetchPosts()\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.posts !== this.props.posts){\r\n            console.log('vro')\r\n            this.setState({posts:this.props.posts})\r\n        }else if(prevProps.post != this.props.post){\r\n            if(this.props.post){\r\n                let newposts = [...this.state.posts];\r\n                newposts.unshift(this.props.post)\r\n                console.log('vro add post:'+this.props.post.fname)\r\n                this.setState({posts:newposts})\r\n            }\r\n        }else if(prevProps.comment != this.props.comment){\r\n            if(this.props.comment){\r\n                let newComments = [...this.state.posts];\r\n                for(var i in newComments){\r\n                    if(newComments[i]._id === this.props.comment.post_id){\r\n                        newComments.comments.unshift(this.props.comment)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newComments})\r\n            }\r\n        }else if(prevProps.like != this.props.like){\r\n            if(this.props.like){\r\n                let newLikes = [...this.state.posts];\r\n                newOneLike = {\r\n                    user_id: this.props.like.user_id\r\n                }\r\n                for(var i in newLikes){\r\n                    if(newLikes[i]._id === this.props.comment.post_id){\r\n                        newLikes.likes.unshift(this.props.newOneLike)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newLikes})\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchStatePosts = () => {\r\n        this.props.fetchPosts()\r\n    };\r\n\r\n\r\n    render() {\r\n\r\n        const postItems = this.state.posts.map((post) => (\r\n\r\n            <div class=\"post\">\r\n                <table>\r\n                <tr>\r\n                    <td><img src={post.user_img} class=\"logo-img\" alt=\"\"/></td>\r\n                    <td><strong>{post.fname} {post.lname} <br/>({this.props.user?this.props.user.branch:''}, {this.props.user?this.props.user.semester:''})</strong></td>\r\n\r\n                    <button class=\"report\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                            <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                        </svg>\r\n                    </button>\r\n                </tr>\r\n                </table>\r\n                <hr style={{margin: '5px'}}/>\r\n                <p class=\"post-text\">\r\n                    {post.discp}\r\n                </p>\r\n                <img src={`./uploads/${post.post_img}`} class=\"post-img\" alt=\"\"/>\r\n                <hr style={{marginTop:'0', backgroundColor:'black'}}/>\r\n                <button class=\"like\">❤</button>\r\n                <span class=\"no-of-likes\">{post.likes.length}</span>\r\n\r\n                <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n                <span class=\"no-of-comments\">{post.comments.length}</span>\r\n                <hr/>\r\n\r\n                {post.comments.map(comment => (\r\n                    <div class=\"comment-by-others\">\r\n                    <img src={comment.user_img} class=\"comment-img\" alt=\"\"/>\r\n                    <span class=\"commentor\">{comment.fname} {comment.lname}</span><br/>\r\n                    <span class=\"actual-comment\">   \r\n                    {comment.comment}\r\n                    </span>\r\n                    </div>\r\n                ))}\r\n                <div class=\"comment-by-others\">\r\n                <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n                <span class=\"commentor\">Another User</span><br/>\r\n                <span class=\"actual-comment\">   \r\n                This is a comment\r\n                </span>\r\n                </div>\r\n\r\n                <div class=\"comment-by-others\">\r\n                <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n                <span class=\"commentor\">Another User</span><br/>\r\n                <span class=\"actual-comment\">   \r\n                This is a comment\r\n                </span>\r\n                </div>\r\n\r\n                <div class=\"comment-by-others\">\r\n                <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n                <span class=\"commentor\">Another User</span><br/>\r\n                <span class=\"actual-comment\">   \r\n                This is a comment\r\n                </span>\r\n                </div>\r\n            </div>\r\n\r\n        ));\r\n\r\n\r\n        return (\r\n            // <div>\r\n                <div class=\"col-md-6\" style={{padding: '10px 30px 10px 30px'}}>\r\n                    {/* <!-- posts go here --> */}\r\n\r\n                    <AddPost/>\r\n\r\n                    <InfiniteScroll\r\n                        dataLength={this.props.posts.length}\r\n                        next={this.fetchStatePosts}\r\n                        hasMore={true}\r\n                        loader={<center><h4 style={{color:'white'}}>Loading/End of posts...</h4></center>}\r\n                    >\r\n                        {postItems}\r\n                    </InfiniteScroll>                 \r\n\r\n\r\n\r\n\r\n\r\n        {/* <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div>\r\n\r\n\r\n         <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div> */}\r\n\r\n\r\n                </div>\r\n            // </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=state=>({\r\n    posts:state.post.items,\r\n    post:state.post.item,\r\n    comment:state.post.cmtitem,\r\n    postLoading:state.post.postLoading,\r\n    auth:state.auth,\r\n    user:state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, { fetchPosts, addComment, addLike })(Posts);\r\n// export default Posts;"]},"metadata":{},"sourceType":"module"}