{"ast":null,"code":"var _jsxFileName = \"D:\\\\Github\\\\Others\\\\jamiabook\\\\client\\\\src\\\\components\\\\dashboard\\\\post\\\\Posts.js\";\nimport React, { Component } from 'react';\nimport AddPost from './AddPost';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { connect } from 'react-redux';\nimport { fetchPosts } from '../../../actions/postActions';\nimport { addComment } from '../../../actions/postActions';\nimport { addLike } from '../../../actions/postActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [] // cmt:'',\n\n    };\n\n    this.fetchStatePosts = () => {\n      this.props.fetchPosts();\n    };\n\n    this.onKeyPress = e => {\n      //it triggers by pressing the enter key\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        const post_id = e.target.id;\n        const user_id = this.props.user._id;\n        const comment = e.target.value;\n        console.log(comment);\n\n        if (comment.length > 0 && comment.trim() !== '') {\n          const newComment = {\n            post_id,\n            user_id,\n            fname: this.props.user.fname,\n            lname: this.props.user.lname,\n            user_img: this.props.user.profile_imgsrc,\n            comment\n          };\n          this.props.addComment(newComment); // this.setState({cmt:''})\n\n          e.target.value = '';\n        }\n      }\n    };\n\n    this.onClick = (e, post) => {\n      // if(e.target.id)\n      let t = 0;\n      post.likes.map(userid => {\n        if (userid.user_id === this.props.user._id) {\n          alert('Already Liked');\n          t = 1;\n        }\n      });\n\n      if (t == 0) {\n        const newLike = {\n          post_id: post._id,\n          user_id: this.props.user._id\n        };\n        this.props.addLike(newLike);\n      }\n    };\n  }\n\n  componentDidMount() {\n    // this.setState({posts:this.props.posts})\n    this.props.fetchPosts();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.posts !== this.props.posts) {\n      console.log('vro');\n      this.setState({\n        posts: this.props.posts\n      });\n    } else if (prevProps.post != this.props.post) {\n      if (this.props.post) {\n        let newposts = [...this.state.posts];\n        newposts.unshift(this.props.post);\n        console.log('vro add post:' + this.props.post.fname);\n        this.setState({\n          posts: newposts\n        });\n      }\n    } else if (prevProps.comment != this.props.comment) {\n      if (this.props.comment) {\n        let newComments = [...this.state.posts];\n\n        for (var i in newComments) {\n          if (newComments[i]._id === this.props.comment.post_id) {\n            newComments[i].comments.unshift(this.props.comment);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newComments\n        });\n      }\n    } else if (prevProps.like != this.props.like) {\n      if (this.props.like) {\n        let newLikes = [...this.state.posts];\n        const newOneLike = {\n          user_id: this.props.like.user_id\n        };\n\n        for (var j in newLikes) {\n          if (newLikes[j]._id === this.props.like.post_id) {\n            newLikes[j].likes.unshift(newOneLike);\n            break;\n          }\n        }\n\n        this.setState({\n          posts: newLikes\n        });\n      }\n    }\n  }\n\n  render() {\n    const postItems = this.state.posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: post.user_img,\n              class: \"logo-img\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [post.fname, \" \", post.lname, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 59\n              }, this), \"(\", this.props.user ? this.props.user.branch : '', \", \", this.props.user ? this.props.user.semester : '', \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"report\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"100%\",\n              height: \"100%\",\n              fill: \"currentColor\",\n              class: \"bi bi-backspace\",\n              viewBox: \"0 0 16 16\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          margin: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"post-text\",\n        children: post.discp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.post_img,\n        class: \"post-img\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          marginTop: '0',\n          backgroundColor: 'black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"like\",\n        id: post._id,\n        onClick: e => {\n          this.onClick(e, post);\n        },\n        children: \"\\u2764\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-likes\",\n        children: post.likes.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        class: \"comment\",\n        placeholder: \"Comment\",\n        id: post._id // onChange={this.onChange}\n        ,\n        onKeyPress: this.onKeyPress // value={this.state.cmt}\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"no-of-comments\",\n        children: post.comments.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), post.comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"comment-by-others\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: comment.user_img,\n          class: \"comment-img\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"commentor\",\n          children: this.props.user ? this.props.user._id === comment.user_id ? 'You' : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [comment.fname, \" \", comment.lname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 110\n          }, this) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 167\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"actual-comment\",\n          children: comment.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this));\n    return (\n      /*#__PURE__*/\n      // <div>\n      _jsxDEV(\"div\", {\n        class: \"col-md-6\",\n        style: {\n          padding: '10px 30px 10px 30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AddPost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          dataLength: this.props.posts.length,\n          next: this.fetchStatePosts,\n          hasMore: true,\n          loader: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: 'white'\n              },\n              children: \"Loading/End of posts...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 33\n          }, this),\n          children: postItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this) // </div>\n\n    );\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  posts: state.post.items,\n  post: state.post.item,\n  comment: state.post.cmtitem,\n  like: state.post.likeitem,\n  postLoading: state.post.postLoading,\n  auth: state.auth,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  fetchPosts,\n  addComment,\n  addLike\n})(Posts); // export default Posts;","map":{"version":3,"sources":["D:/Github/Others/jamiabook/client/src/components/dashboard/post/Posts.js"],"names":["React","Component","AddPost","InfiniteScroll","connect","fetchPosts","addComment","addLike","Posts","state","posts","fetchStatePosts","props","onKeyPress","e","key","preventDefault","post_id","target","id","user_id","user","_id","comment","value","console","log","length","trim","newComment","fname","lname","user_img","profile_imgsrc","onClick","post","t","likes","map","userid","alert","newLike","componentDidMount","componentDidUpdate","prevProps","setState","newposts","unshift","newComments","i","comments","like","newLikes","newOneLike","j","render","postItems","branch","semester","margin","discp","post_img","marginTop","backgroundColor","padding","color","mapStateToProps","items","item","cmtitem","likeitem","postLoading","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AddPost from './AddPost';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { connect } from 'react-redux';\r\nimport { fetchPosts } from '../../../actions/postActions';\r\nimport { addComment } from '../../../actions/postActions';\r\nimport { addLike } from '../../../actions/postActions';\r\n\r\n\r\nclass Posts extends Component {\r\n\r\n    state = {\r\n        posts:[],\r\n        // cmt:'',\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.setState({posts:this.props.posts})\r\n        this.props.fetchPosts()\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.posts !== this.props.posts){\r\n            console.log('vro')\r\n            this.setState({posts:this.props.posts})\r\n        }else if(prevProps.post != this.props.post){\r\n            if(this.props.post){\r\n                let newposts = [...this.state.posts];\r\n                newposts.unshift(this.props.post)\r\n                console.log('vro add post:'+this.props.post.fname)\r\n                this.setState({posts:newposts})\r\n            }\r\n        }else if(prevProps.comment != this.props.comment){\r\n            if(this.props.comment){\r\n                let newComments = [...this.state.posts];\r\n                for(var i in newComments){\r\n                    if(newComments[i]._id === this.props.comment.post_id){\r\n                        newComments[i].comments.unshift(this.props.comment)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newComments})\r\n            }\r\n        }else if(prevProps.like != this.props.like){\r\n            if(this.props.like){\r\n                let newLikes = [...this.state.posts];\r\n                const newOneLike = {\r\n                    user_id: this.props.like.user_id\r\n                }\r\n                for(var j in newLikes){\r\n                    if(newLikes[j]._id === this.props.like.post_id){\r\n                        newLikes[j].likes.unshift(newOneLike)\r\n                        break;\r\n                    }\r\n                }\r\n                this.setState({posts:newLikes})\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchStatePosts = () => {\r\n        this.props.fetchPosts()\r\n    };\r\n\r\n\r\n    // onChange = (e) => {\r\n    //     this.setState({cmt:e.target.value})\r\n    // }\r\n    \r\n    onKeyPress = (e) => {\r\n        //it triggers by pressing the enter key\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault()\r\n            const post_id = e.target.id\r\n            const user_id = this.props.user._id\r\n            const comment = e.target.value\r\n            console.log(comment)\r\n            if(comment.length>0 && comment.trim() !== ''){\r\n                const newComment = {\r\n                    post_id,\r\n                    user_id,\r\n                    fname:this.props.user.fname,\r\n                    lname:this.props.user.lname,\r\n                    user_img:this.props.user.profile_imgsrc,\r\n                    comment,\r\n                }\r\n                this.props.addComment(newComment)\r\n                // this.setState({cmt:''})\r\n                e.target.value = ''\r\n            }\r\n        }\r\n    }\r\n\r\n    onClick = (e, post) => {\r\n        // if(e.target.id)\r\n        let t=0;\r\n        post.likes.map(userid => {\r\n            if(userid.user_id === this.props.user._id){\r\n                alert('Already Liked')\r\n                t=1;\r\n            }\r\n        })\r\n        if(t==0){\r\n            const newLike = {\r\n                post_id:post._id,\r\n                user_id:this.props.user._id\r\n            }\r\n            this.props.addLike(newLike)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const postItems = this.state.posts.map((post) => (\r\n\r\n            <div class=\"post\">\r\n                <table>\r\n                <tr>\r\n                    <td><img src={post.user_img} class=\"logo-img\" alt=\"\"/></td>\r\n                    <td><strong>{post.fname} {post.lname} <br/>({this.props.user?this.props.user.branch:''}, {this.props.user?this.props.user.semester:''})</strong></td>\r\n\r\n                    <button class=\"report\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                            <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                        </svg>\r\n                    </button>\r\n                </tr>\r\n                </table>\r\n                <hr style={{margin: '5px'}}/>\r\n                <p class=\"post-text\">\r\n                    {post.discp}\r\n                </p>\r\n                {/* <img src={`./uploads/${post.post_img}`} class=\"post-img\" alt=\"\"/> */}\r\n                <img src={post.post_img} class=\"post-img\" alt=\"\"/>\r\n                <hr style={{marginTop:'0', backgroundColor:'black'}}/>\r\n                <button class=\"like\" id={post._id} onClick={(e)=>{this.onClick(e,post)}}>❤</button>\r\n                <span class=\"no-of-likes\">{post.likes.length}</span>\r\n\r\n                <input \r\n                    type=\"text\" \r\n                    class=\"comment\" \r\n                    placeholder=\"Comment\"\r\n                    id={post._id}\r\n                    // onChange={this.onChange}\r\n                    onKeyPress={this.onKeyPress}\r\n                    // value={this.state.cmt}\r\n                />\r\n                <span class=\"no-of-comments\">{post.comments.length}</span>\r\n                <hr/>\r\n\r\n                {post.comments.map(comment => (\r\n                    <div class=\"comment-by-others\">\r\n                    <img src={comment.user_img} class=\"comment-img\" alt=\"\"/>\r\n                    <span class=\"commentor\">{this.props.user?(this.props.user._id === comment.user_id?'You':(<span>{comment.fname} {comment.lname}</span>)):''}</span><br/>\r\n                    <span class=\"actual-comment\">   \r\n                    {comment.comment}\r\n                    </span>\r\n                    </div>\r\n                ))}\r\n                {/* <div class=\"comment-by-others\">\r\n                <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n                <span class=\"commentor\">Another User</span><br/>\r\n                <span class=\"actual-comment\">   \r\n                This is a comment\r\n                </span>\r\n                </div> */}\r\n            </div>\r\n\r\n        ));\r\n\r\n\r\n        return (\r\n            // <div>\r\n                <div class=\"col-md-6\" style={{padding: '10px 30px 10px 30px'}}>\r\n                    {/* <!-- posts go here --> */}\r\n\r\n                    <AddPost/>\r\n\r\n                    <InfiniteScroll\r\n                        dataLength={this.props.posts.length}\r\n                        next={this.fetchStatePosts}\r\n                        hasMore={true}\r\n                        loader={<center><h4 style={{color:'white'}}>Loading/End of posts...</h4></center>}\r\n                    >\r\n                        {postItems}\r\n                    </InfiniteScroll>                 \r\n\r\n\r\n\r\n\r\n\r\n        {/* <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div>\r\n\r\n\r\n         <div class=\"post\">\r\n            <table>\r\n               <tr>\r\n                  <td><img src=\"Images/user.png\" class=\"logo-img\" alt=\"\"/></td>\r\n                  <td><strong>User name (CSE, Sem I)</strong></td>\r\n\r\n                  <button class=\"report\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" fill=\"currentColor\" class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\"/>\r\n                        <path d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\"/>\r\n                      </svg>\r\n                  </button>\r\n               </tr>\r\n            </table>\r\n            <hr style={{margin: '5px'}}/>\r\n            <p class=\"post-text\">\r\n               Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est, unde harum nesciunt nobis amet sit quod asperiores animi ipsa officiis blanditiis esse fugit, omnis aut possimus explicabo autem error molestiae beatae aliquam deleniti expedita perspiciatis. Molestias quis voluptas quasi exercitationem ducimus minima corrupti ipsum iusto deleniti asperiores, accusamus omnis fugiat, voluptate aut, qui totam dolore? Libero culpa similique alias reprehenderit tempore vitae consectetur consequuntur blanditiis eveniet! In modi fugit corrupti atque quasi voluptatibus sint, dolore nemo vero sapiente placeat sequi eius esse odit impedit ipsum dolorum. Nemo saepe, aperiam enim minima, ea necessitatibus error numquam a, quidem odit fugiat.\r\n            </p>\r\n            <img src=\"Images/logo.jpg\" class=\"post-img\" alt=\"\"/>\r\n            <hr style={{marginTop: '0px', backgroundColor: 'black'}}/>\r\n            <button class=\"like\">❤</button>\r\n            <span class=\"no-of-likes\">0</span>\r\n\r\n            <input type=\"text\" class=\"comment\" placeholder=\"Comment\"/>\r\n            <span class=\"no-of-comments\">0</span>\r\n            <hr/>\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n\r\n            <div class=\"comment-by-others\">\r\n               <img src=\"Images/user.png\" class=\"comment-img\" alt=\"\"/>\r\n               <span class=\"commentor\">Another User</span><br/>\r\n               <span class=\"actual-comment\">   \r\n               This is a comment\r\n               </span>\r\n            </div>\r\n         </div> */}\r\n\r\n\r\n                </div>\r\n            // </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=state=>({\r\n    posts:state.post.items,\r\n    post:state.post.item,\r\n    comment:state.post.cmtitem,\r\n    like:state.post.likeitem,\r\n    postLoading:state.post.postLoading,\r\n    auth:state.auth,\r\n    user:state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, { fetchPosts, addComment, addLike })(Posts);\r\n// export default Posts;"]},"metadata":{},"sourceType":"module"}