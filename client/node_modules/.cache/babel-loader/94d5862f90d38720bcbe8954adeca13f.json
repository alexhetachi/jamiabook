{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Syed Mohdin\\\\Desktop\\\\jmibook\\\\client\\\\src\\\\components\\\\dashboard\\\\post\\\\AddPost.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { addPost } from '../../../actions/postActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddPost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      myImage: '',\n      discp: '',\n      msg: null,\n      test: ''\n    };\n\n    this.onChange = e => {\n      this.setState({\n        myImage: e.target.files[0]\n      });\n      console.log(e.target.files[0]);\n      this.setState({\n        msg: null\n      });\n      this.setState({\n        test: e.target.value\n      });\n    };\n\n    this.onTextChange = e => {\n      this.setState({\n        discp: e.target.value\n      });\n      this.setState({\n        msg: null\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        test: null\n      });\n      console.log('submitting');\n      const formData = new FormData();\n      formData.append('user_id', this.props.user._id);\n      formData.append('fname', this.props.user.fname);\n      formData.append('lname', this.props.user.lname);\n      formData.append('user_img', this.props.user.profile_imgsrc);\n      formData.append('discp', this.state.discp);\n      formData.append('myImage', this.state.myImage); // console.log(formData.get('user_img'))\n\n      if (!this.state.discp.trim() || !this.state.myImage) {\n        this.setState({\n          msg: 'Please enter all fields.'\n        });\n      } else {\n        this.setState({\n          msg: null\n        });\n        this.props.addPost(formData);\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.post != this.props.post) {\n      if (this.props.post) {\n        this.setState({\n          discp: ''\n        });\n        this.setState({\n          msg: null\n        });\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"create-post\",\n        children: [/*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: 'red'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: this.state.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          method: \"post\",\n          onSubmit: this.onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"images/Anonymous.jpg\",\n            class: \"user-create-post\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"create\",\n            id: \"textarea\",\n            placeholder: \"Share Something with the community\",\n            cols: \"50\",\n            rows: \"2\",\n            onChange: this.onTextChange,\n            value: this.state.discp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            class: \"file-input\",\n            id: \"file-choose\",\n            class: \"extreme-right\",\n            name: \"myImage\",\n            onChange: this.onChange,\n            value: this.state.test // ref={this.state.myImage}\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            class: \"submit-button\",\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  post: state.post.item\n});\n\nexport default connect(mapStateToProps, {\n  addPost\n})(AddPost); // export default AddPost;","map":{"version":3,"sources":["C:/Users/Syed Mohdin/Desktop/jmibook/client/src/components/dashboard/post/AddPost.js"],"names":["React","Component","connect","addPost","AddPost","state","myImage","discp","msg","test","onChange","e","setState","target","files","console","log","value","onTextChange","onSubmit","preventDefault","formData","FormData","append","props","user","_id","fname","lname","profile_imgsrc","trim","componentDidUpdate","prevProps","post","render","color","mapStateToProps","auth","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addPost } from '../../../actions/postActions';\r\n\r\nclass AddPost extends Component {\r\n\r\n    state={\r\n        myImage:'',\r\n        discp:'',\r\n        msg:null,\r\n        test:''\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({ myImage:e.target.files[0] })\r\n        console.log(e.target.files[0])\r\n        this.setState({ msg:null })\r\n        this.setState({test:e.target.value})\r\n    }\r\n\r\n    onTextChange = (e) => {\r\n        this.setState({ discp:e.target.value })\r\n        this.setState({ msg:null })\r\n    }\r\n\r\n//  async\r\n    onSubmit = e => {\r\n        e.preventDefault();\r\n        this.setState({test:null})\r\n        console.log('submitting')\r\n        const formData = new FormData();\r\n        \r\n        formData.append('user_id', this.props.user._id);\r\n        formData.append('fname', this.props.user.fname);\r\n        formData.append('lname', this.props.user.lname);\r\n        formData.append('user_img', this.props.user.profile_imgsrc);\r\n        formData.append('discp', this.state.discp);\r\n        formData.append('myImage', this.state.myImage);\r\n        // console.log(formData.get('user_img'))\r\n        if(!this.state.discp.trim() || !this.state.myImage){\r\n            this.setState({msg:'Please enter all fields.'})\r\n        }else{\r\n            this.setState({msg:null})\r\n            this.props.addPost(formData);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.post != this.props.post){\r\n            if(this.props.post){\r\n                this.setState({ discp:'' })\r\n                this.setState({ msg:null })\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div class=\"create-post\">\r\n                <center><p style={{color:'red'}}><b>{this.state.msg}</b></p></center>\r\n                <form method='post' onSubmit={this.onSubmit}>\r\n                    <img src=\"images/Anonymous.jpg\" class=\"user-create-post\" alt=\"\"/>\r\n                    <textarea \r\n                        name=\"create\" \r\n                        id=\"textarea\" \r\n                        placeholder=\"Share Something with the community\" \r\n                        cols=\"50\" \r\n                        rows=\"2\"\r\n                        onChange={this.onTextChange}\r\n                        value={this.state.discp}\r\n                    />    \r\n                    <input\r\n                        type=\"file\"\r\n                        class=\"file-input\"\r\n                        id=\"file-choose\" \r\n                        class=\"extreme-right\"\r\n                        name=\"myImage\"\r\n                        onChange={this.onChange}\r\n                        value={this.state.test}\r\n                        // ref={this.state.myImage}\r\n                    />\r\n                    {/* <label for=\"file-choose\" class=\"svg-pos\"/> */}\r\n                    {/* <table class=\"extreme-right\">\r\n                        <tr>\r\n                            <td>\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40px\" height=\"40px\" fill=\"currentColor\" class=\"bi bi-image\" viewBox=\"0 0 16 16\">\r\n                                <path d=\"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\r\n                                <path d=\"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z\"/>\r\n                                </svg>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><button type=\"submit\" class=\"submit-button\">Post</button></td>\r\n                        </tr>\r\n                    </table> */}\r\n                    <button type=\"submit\" class=\"submit-button\">Post</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    user:state.auth.user,\r\n    post:state.post.item,\r\n});\r\n\r\nexport default connect(mapStateToProps, { addPost })(AddPost);\r\n// export default AddPost;"]},"metadata":{},"sourceType":"module"}